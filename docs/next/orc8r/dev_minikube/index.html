<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Deploy on Minikube · Magma Documentation</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Deploy on Minikube"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Deploy on Minikube · Magma Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://magma.github.io/magma/"/><meta property="og:description" content="# Deploy on Minikube"/><meta property="og:image" content="https://magma.github.io/magma/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://magma.github.io/magma/img/docusaurus.png"/><link rel="shortcut icon" href="/magma/img/icon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script><script type="text/javascript" src="/init.js"></script><script src="/magma/js/scrollSpy.js"></script><link rel="stylesheet" href="/magma/css/main.css"/><script src="/magma/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/magma/"><img class="logo" src="/magma/img/magma-logo.svg" alt="Magma Documentation"/><h2 class="headerTitleWithLogo">Magma Documentation</h2></a><a href="/magma/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://magmacore.org" target="_self">Magma Website</a></li><li class=""><a target="_self"> | </a></li><li class=""><a href="/magma/" target="_self">Docs</a></li><li class=""><a target="_self"> | </a></li><li class=""><a href="https://github.com/magma" target="_self">Code</a></li><li class=""><a target="_self"> | </a></li><li class=""><a href="https://github.com/magma/magma/wiki/Contributor-Guide" target="_self">Contributing</a></li><li class=""><a target="_self"> | </a></li><li class=""><a href="https://wiki.magmacore.org/" target="_self">Wiki</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Orchestrator</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/magma/docs/next/basics/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/basics/prerequisites">Prerequisites</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/basics/quick_start_guide">Quick Start Guide</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/bazel/agw_with_bazel">AGW with Bazel</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tutorials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Operate your own private mobile network with Charmed Magma</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/tutorials/00_overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/tutorials/01_getting_started">1. Getting Started</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/tutorials/02_deploying_magma_orchestrator">2. Deploying Magma Orchestrator</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/tutorials/03_deploying_magma_agw">3. Deploying Magma Access Gateway</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/tutorials/04_integrating_agw_with_orc8r">4. Integrating Magma Access Gateway with Magma Orchestrator</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/tutorials/05_deploying_the_radio_simulator">5. Deploying the radio simulator</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/tutorials/06_simulating_user_traffic">6. Simulating user traffic</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/tutorials/06_destroying_the_env">7. Destroying the environment</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Usage<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">How-To</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/ue_metering">UE Usage Metering</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/config_agw_bridged">AGW Non-NAT Mode</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/5g_nsa_support">5G NSA Support</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/call_tracing">Call Tracing</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/events_monitoring">Events Monitoring</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/ipv6_agw">(Experimental) Configure IPv6 AGW</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/he_api">Header Enrichment</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/inbound_roaming">Inbound Roaming</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/l3_transport">L3 transport for AGW</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/network_probe">Network Probe</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/package">Packaging</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">NMS</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/dashboard">Dashboard</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/equipment">Equipment</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/network">Network</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/subscriber">Subscriber</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/traffic">Traffic</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/metrics">Metrics</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/alerts">Alerts</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/federation">Federation</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/admin">Admin</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/tips_and_tricks">Tips and Tricks</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Architecture<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Access Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/architecture_overview">Overview</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Orchestrator</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/architecture_overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/architecture_modularity">Modularity</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/architecture_security">Security</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">NMS</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/architecture_overview">Overview</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">FeG</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/feg/architecture_overview">Overview</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Domain Proxy</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/dp/architecture_overview">Overview</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Deploy<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">General</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/general/aws_cloudstrapper">AWS Cloudstrapper Install</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Access Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/deploy_install">Install AGW</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/deploy_install_docker">Install Docker AGW</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/deploy_config_agw">Configure AGW</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/deploy_config_enodebd">Configure eNodeB</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/deploy_config_apn">Configure an APN</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/deploy_agw_using_juju">Deploy AGW using Juju</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/build_install_magma_pkg_in_agw">Build and install a magma package in AGW</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Orchestrator</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/deploy_intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/deploy_install">Install Orchestrator</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/deploy_using_ansible">Deploy Orchestrator using Ansible (Beta)</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/deploy_using_juju">Deploy Orchestrator using Juju (Beta)</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/deploy_terraform_options">Terraform Options</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/deploy_faq">FAQs</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">NMS</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/deploy_setup">Set Up NMS</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Federation Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/feg/deploy_intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/feg/deploy_build">Build FeG</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/feg/deploy_install">Install FeG</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Domain Proxy</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/dp/deploy_build">Build and deployment</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Carrier WiFi</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/cwf/deploy_intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/cwf/deploy_build">Building Carrier Wifi Gateway</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/cwf/deploy_install">Installing Carrier Wifi Gateway</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Configure<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Access Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/configure_agw_ha">Configure AGW for HA</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/configure_sentry">Sentry Integration</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Orchestrator</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/configure_thanos">Thanos</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Federation Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/feg/configure_federation">Configure FeG</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">NMS</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/nms_organizations">Multitenancy (Organizations)</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Upgrade<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">General</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/general/upgrade_intro">Introduction</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Access Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/upgrade_debian_to_ubuntu">Migrate AGWs to Ubuntu</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/upgrade_1_6">Upgrade to v1.6</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/upgrade_1_5">Upgrade to v1.5</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/upgrade_1_4">Upgrade to v1.4</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/upgrade_1_3">Upgrade to v1.3</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/upgrade_1_2">Upgrade to v1.2</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/upgrade_1_1">Upgrade to v1.1</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Orchestrator</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/upgrade_intro">Introduction</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/upgrade_1_6">Upgrade to v1.6</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/upgrade_1_5">Upgrade to v1.5</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/upgrade_1_4">Upgrade to v1.4</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/upgrade_1_3">Upgrade to v1.3</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/upgrade_1_2">Upgrade to v1.2</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/upgrade_1_1">Upgrade to v1.1</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Debug<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">General</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/troubleshooting/agw_healthcheck">Perform Access Gateway health check</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/troubleshooting/agw_unable_to_checkin">Access Gateway Unable to Check-in to Orchestrator</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/troubleshooting/user_unable_to_attach">User is unable to attach to Magma</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/troubleshooting/update_certificates">Update rootCA and controller SSL certificates</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/troubleshooting/generate_admin_operator_certificates">Generate and update admin_operator certificates</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/troubleshooting/analyze_service_crashes_in_agw">Analyze Service crashes in AGW</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/howtos/troubleshooting/datapath_connectivity">Debugging AGW datapath issues</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Access Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/debug_show_tech">Show Tech</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/debug_dp_probe">Datapath Probe CLI</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/debug_user_control_plane">User Control Plane trace CLI</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Federated Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/feg/debug_cli">FeG CLI</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Carrier WiFi</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/cwf/healthchecker">Health Checker</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/cwf/pipelined_packet_tracer_debugging">Pipelined Packet Tracer Debugging</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Orchestrator</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/debug_logs">View Logs</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">NMS</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/alerts_troubleshooting">Alerts</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Domain Proxy</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/dp/debug_logs">Debugging and logs</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Contribute<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/magma/docs/next/contributing/contribute_github">Community</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/contributing/contribute_codeowners">Codeowners Workflow</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/contributing/contribute_tsc_norms">TSC Processes</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/contributing/contribute_proposals">Proposals Process</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Technical Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">General</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/resources/ref_pcap">PCAP Collection</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/resources/ref_useful_links">Useful Links</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/resources/ref_magma_metrics">Life of a Magma Metric</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Access Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/readme_agw">Services/Sub-Components</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/dev_notes">Developer Notes</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/openvswitch">Magma Datapath</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/pipelined">Pipelined</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/ebpf_datapath">Magma eBPF Datapath</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/ipfix">Magma IPFIX Support</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/pipelined_tests">Pipelined testing framework</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/dev_unit_testing">Test AGW</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/tr069">Add eNB TR-069 Support</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/s1ap_tests">S1AP Integration Tests</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/eventd">Event Reporting</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/sessiond">Session Management in Magma</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/access_service_restrictions">Restricting Network Access</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/dev_teid_allocation">TEID Allocation</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/integrated_5g_sa">Integrated 5G SA</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/extended_5g_sa_features">Extended 5G SA Features</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/suci_extensions">SUCI Extensions</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/redirectd">Redirection</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/lte/readme_callflow">Building the Callflow</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Orchestrator</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/dev_rest_api">REST API</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/dev_build">Build Orchestrator</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/dev_testing">Test Orchestrator</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/magma/docs/next/orc8r/dev_minikube">Deploy on Minikube</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/dev_security">Security</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/dev_indexers">State Indexers</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/dev_sub_digests">Subscriber Digests</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/dev_rest_api_auth">REST API Auth</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/dev_dependencies">Module Dependencies</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/dev_gateway_registration">Gateway Registration</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/orc8r/dev_aws_stack">AWS Stack</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">NMS</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/dev_spacing">Spacing Guidelines</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/dev_testing">Test NMS</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/dev_themes">Themes</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/nms/dev_components">Components</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Federation Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/feg/dev_testing">Test Federation Gateway</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/feg/docker">FeG Docker Setup</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/feg/s1ap_federated_tests">S1AP Federated Integration Tests</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/feg/session_proxy">Session Proxy</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Carrier WiFi</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/cwf/dev_testing">Test CWAG</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Design Documents<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">General</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p001_vpn_config_from_api">Configurable VPN from Orchestrator API</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p005_call_tracing">Call Tracing for Troubleshooting</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p014_proposal_process">Magma Proposals</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p015_tech_debt_week">Tech Debt Week Processes</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p017_apn_refactoring">APN Refactoring Proposal</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Access Gateway</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p003_qos_enforcement">QoS Policy Configuration</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p004_fua_restrict_feature">Service Restriction Feature</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p007_header_enrichment">Header enrichment</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p008_apn_correction">MME APN Correction</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p013_Ubuntu_upgrade">AGW Ubuntu upgrade</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p018_control_network_metrics">Export Control Path Network Metrics</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p019_enodeb_cbrs_support">Enodebd CBRS Support</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p020_sgi_tunnel_transport">L3 transport for AGW</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Orchestrator</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p002_scaled_prometheus_pipeline">Scaled Prometheus Pipeline</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p010_subscriber_scaling">Subscriber Scaling</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p011_victoriametrics">VictoriaMetrics as Magma&#x27;s TSDB</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">NMS</h4><ul><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p009_nms_mariadb_migration">NMS MariaDB Migration</a></li><li class="navListItem"><a class="navItem" href="/magma/docs/next/proposals/p016_nms_regression_testing">NMS Regression Testing</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">FAQ<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/magma/docs/next/faq/faq_magma">Frequently Asked Questions</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="deploy-on-minikube"></a><a href="#deploy-on-minikube" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploy on Minikube</h1>
<p>Deploying Orc8r on Minikube is the easiest way to test changes to the Helm charts. Most steps are similar to the main deployment guide, with a few differences.</p>
<h2><a class="anchor" aria-hidden="true" id="prerequisites"></a><a href="#prerequisites" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prerequisites</h2>
<h3><a class="anchor" aria-hidden="true" id="spin-up-minikube"></a><a href="#spin-up-minikube" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Spin up Minikube</h3>
<p>Set up Minikube with one of the following commands, including sufficient resources and seeding the metrics config files:</p>
<ul>
<li><p>On macOS</p>
<pre><code class="hljs css language-bash">minikube start --cni=bridge --driver=hyperkit --memory=8gb --cpus=8 --kubernetes-version=<span class="hljs-string">'v1.20.2'</span> --mount --mount-string <span class="hljs-string">"<span class="hljs-variable">${MAGMA_ROOT}</span>/orc8r/cloud/docker/metrics-configs:/configs"</span>
</code></pre></li>
<li><p>On Linux</p>
<pre><code class="hljs css language-bash">minikube start --cni=bridge --driver=docker --memory=8gb --cpus=8 --kubernetes-version=<span class="hljs-string">'v1.20.2'</span> --mount --mount-string <span class="hljs-string">"<span class="hljs-variable">${MAGMA_ROOT}</span>/orc8r/cloud/docker/metrics-configs:/configs"</span>
</code></pre></li>
</ul>
<p>where the only difference between the two is the driver used.</p>
<blockquote>
<p>Note:</p>
<ul>
<li>There are a lot of things that can go wrong with spinning up Minikube, so if you have problems check for documentation specific to your system.</li>
<li>Make sure you are not connected to a VPN when running this command.</li>
<li>For further information on the recommended drivers used above, see <a href="#minikube-configs">Minikube configs</a>.</li>
</ul>
</blockquote>
<p>Now install prerequisites for Orc8r and create the <code>orc8r</code> K8s namespace</p>
<pre><code class="hljs css language-bash">helm repo add bitnami https://charts.bitnami.com/bitnami
helm upgrade --install \
    --create-namespace \
    --namespace orc8r \
    --<span class="hljs-built_in">set</span> global.postgresql.auth.postgresPassword=postgres,global.postgresql.auth.database=magma,fullnameOverride=postgresql \
    postgresql \
    bitnami/postgresql
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="build-and-publish-images"></a><a href="#build-and-publish-images" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build and publish images</h3>
<blockquote>
<p>NOTE: skip this step if you want to use the official container images at <a href="https://linuxfoundation.jfrog.io/">linuxfoundation.jfrog.io</a>.</p>
</blockquote>
<p>There are 2 ways you can publish your own images: to a private registry, or to a localhost registry. Choose an option, then complete the relevant prerequisites:</p>
<ol>
<li>Publish to private registry (specifically, we'll use <a href="https://hub.docker.com/">DockerHub</a>)
<ul>
<li><code>docker login</code></li>
<li>Use <code>registry.hub.docker.com/USERNAME</code> as your registry name</li>
</ul></li>
<li>Publish to localhost registry (specifically, we'll use the <a href="https://minikube.sigs.k8s.io/docs/handbook/registry/#docker-on-macos">local Docker registry via Minikube</a>)
<ul>
<li><code>minikube addons enable registry</code></li>
<li><code>docker run --rm -it --network=host alpine ash -c &quot;apk add socat &amp;&amp; socat TCP-LISTEN:5000,reuseaddr,fork TCP:$(minikube ip):5000&quot;</code>
<ul>
<li>This should hang, open new tab for other commands</li>
</ul></li>
<li>Use <code>localhost:5000</code> as your registry name</li>
</ul></li>
</ol>
<p>After completing the prerequisites listed above, follow the instructions at <a href="/magma/docs/next/orc8r/dev_build#build-and-publish-container-images">Building Orchestrator</a> to publish container images to the chosen registry.</p>
<h2><a class="anchor" aria-hidden="true" id="install"></a><a href="#install" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install</h2>
<h3><a class="anchor" aria-hidden="true" id="generate-secrets"></a><a href="#generate-secrets" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generate secrets</h3>
<p>If you haven't already, the easiest way to generate these secrets is temporarily spinning up a local, Docker-based deployment</p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">export</span> CERTS_DIR=<span class="hljs-variable">${MAGMA_ROOT}</span>/.cache/test_certs
<span class="hljs-built_in">cd</span> <span class="hljs-variable">${MAGMA_ROOT}</span>/orc8r/cloud/docker &amp;&amp; ./build.py &amp;&amp; ./run.py &amp;&amp; sleep 30 &amp;&amp; docker compose down &amp;&amp; ls -l <span class="hljs-variable">${CERTS_DIR}</span> &amp;&amp; <span class="hljs-built_in">cd</span> -
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="apply-secrets"></a><a href="#apply-secrets" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Apply secrets</h3>
<p>Create the K8s secrets</p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">export</span> IMAGE_REGISTRY_URL=linuxfoundation.jfrog.io/magma-docker  <span class="hljs-comment"># or replace with your registry</span>
<span class="hljs-built_in">export</span> IMAGE_REGISTRY_USERNAME=<span class="hljs-string">''</span>
<span class="hljs-built_in">export</span> IMAGE_REGISTRY_PASSWORD=<span class="hljs-string">''</span>

<span class="hljs-built_in">export</span> CERTS_DIR=<span class="hljs-variable">${MAGMA_ROOT}</span>/.cache/test_certs  <span class="hljs-comment"># mirrored from above</span>

<span class="hljs-built_in">cd</span> <span class="hljs-variable">${MAGMA_ROOT}</span>/orc8r/cloud/helm/orc8r
helm template orc8r charts/secrets \
  --namespace orc8r \
  --<span class="hljs-built_in">set</span>-string secret.certs.enabled=<span class="hljs-literal">true</span> \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.rootCA\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/rootCA.pem \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.bootstrapper\.key'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/bootstrapper.key \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.controller\.crt'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/controller.crt \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.controller\.key'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/controller.key \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.admin_operator\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/admin_operator.pem \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.admin_operator\.key\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/admin_operator.key.pem \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.certifier\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/certifier.pem \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.certifier\.key'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/certifier.key \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.nms_nginx\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/controller.crt \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.nms_nginx\.key\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/controller.key \
  --<span class="hljs-built_in">set</span>=docker.registry=<span class="hljs-variable">${IMAGE_REGISTRY_URL}</span> \
  --<span class="hljs-built_in">set</span>=docker.username=<span class="hljs-variable">${IMAGE_REGISTRY_USERNAME}</span> \
  --<span class="hljs-built_in">set</span>=docker.password=<span class="hljs-variable">${IMAGE_REGISTRY_PASSWORD}</span> |
  kubectl apply -f -
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="optional-fluentd-secrets"></a><a href="#optional-fluentd-secrets" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optional: fluentd secrets</h3>
<p>To use fluentd on the minikube deployment, create additional fluentd secrets</p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">${CERTS_DIR}</span>
openssl genrsa -out fluentd.key 2048
openssl req -new -key fluentd.key -out fluentd.csr -subj <span class="hljs-string">"/C=US/CN=fluentd.<span class="hljs-variable">$domain</span>"</span>
openssl x509 -req -<span class="hljs-keyword">in</span> fluentd.csr -CA certifier.pem -CAkey certifier.key -CAcreateserial -out fluentd.pem -days 3650 -sha256
</code></pre>
<p>Apply the secrets</p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">${MAGMA_ROOT}</span>/orc8r/cloud/helm/orc8r
helm template orc8r charts/secrets \
  --namespace orc8r \
  --<span class="hljs-built_in">set</span>-string secret.certs.enabled=<span class="hljs-literal">true</span> \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.rootCA\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/rootCA.pem \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.bootstrapper\.key'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/bootstrapper.key \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.controller\.crt'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/controller.crt \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.controller\.key'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/controller.key \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.admin_operator\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/admin_operator.pem \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.admin_operator\.key\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/admin_operator.key.pem \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.certifier\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/certifier.pem \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.certifier\.key'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/certifier.key \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.nms_nginx\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/controller.crt \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.nms_nginx\.key\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/controller.key \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.fluentd\.pem'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/fluentd.pem \
  --<span class="hljs-built_in">set</span>-file <span class="hljs-string">'secret.certs.files.fluentd\.key'</span>=<span class="hljs-variable">${CERTS_DIR}</span>/fluentd.key \
  --<span class="hljs-built_in">set</span>=docker.registry=<span class="hljs-variable">${IMAGE_REGISTRY_URL}</span> \
  --<span class="hljs-built_in">set</span>=docker.username=<span class="hljs-variable">${IMAGE_REGISTRY_USERNAME}</span> \
  --<span class="hljs-built_in">set</span>=docker.password=<span class="hljs-variable">${IMAGE_REGISTRY_PASSWORD}</span> |
  kubectl apply -f -
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="create-values-file"></a><a href="#create-values-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create values file</h3>
<p>A minimal values file is at <code>${MAGMA_ROOT}/orc8r/cloud/helm/orc8r/examples/minikube.values.yaml</code></p>
<ul>
<li>Copy that file to <code>${MAGMA_ROOT}/orc8r/cloud/helm/orc8r.values.yaml</code></li>
<li>Replace <code>IMAGE_REGISTRY_URL</code> with your registry and <code>IMAGE_TAG</code> with your tag</li>
<li>Make additional edits as desired</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="install-charts"></a><a href="#install-charts" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Install charts</h3>
<p>This section describes how to install based on local charts. However, you can also install charts from the official chart repositories</p>
<ul>
<li>Stable: <a href="https://linuxfoundation.jfrog.io/artifactory/magma-helm-prod/">https://linuxfoundation.jfrog.io/artifactory/magma-helm-prod/</a></li>
<li>Test: <a href="https://linuxfoundation.jfrog.io/artifactory/magma-helm-test/">https://linuxfoundation.jfrog.io/artifactory/magma-helm-test/</a></li>
</ul>
<p>Install base <code>orc8r</code> chart</p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">${MAGMA_ROOT}</span>/orc8r/cloud/helm/orc8r
helm dep update
helm upgrade --install --namespace orc8r --values <span class="hljs-variable">${MAGMA_ROOT}</span>/orc8r/cloud/helm/orc8r.values.yaml orc8r .
</code></pre>
<p>Optionally, install the <code>cwf-orc8r</code>, <code>feg-orc8r</code>, and <code>lte-orc8r</code> charts by modifying the file templates similarly to the <code>orc8r</code> values file.
Move the value file to <code>${MAGMA_ROOT}/orc8r/cloud/helm/{component}.values.yaml</code>.
For <code>lte-orc8r</code> charts you can find a <code>minikube.values.yaml</code> template file in the <code>${MAGMA_ROOT}/{component}/cloud/helm/{component}-orc8r/examples/</code> directory.
For the other charts you can find a <code>values.yaml</code> file in the main <code>${MAGMA_ROOT}/{component}/cloud/helm/{component}-orc8r/</code> directory.</p>
<p>Add the following to the <code>{component}.values.yaml</code> file:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">image:</span>
<span class="hljs-comment"># ...</span>
  <span class="hljs-attr">env:</span>
      <span class="hljs-attr">orc8r_domain_name:</span> <span class="hljs-string">"magma.test"</span>
</code></pre>
<p>And install the helm charts like this:</p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">${MAGMA_ROOT}</span>/lte/cloud/helm/lte-orc8r
helm dep update
helm upgrade --install --namespace orc8r --values <span class="hljs-variable">${MAGMA_ROOT}</span>/orc8r/cloud/helm/lte.values.yaml lte .
</code></pre>
<p>Optionally install the fluentd charts by editing the file at <code>${MAGMA_ROOT}/orc8r/cloud/helm/orc8r/charts/logging/values.yaml</code></p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">fluentd_daemon:</span>
  <span class="hljs-attr">create:</span> <span class="hljs-literal">true</span>

  <span class="hljs-attr">image:</span>
    <span class="hljs-attr">repository:</span> <span class="hljs-string">IMAGE_REGISTRY_URL</span>
    <span class="hljs-attr">tag:</span> <span class="hljs-string">IMAGE_TAG</span>
    <span class="hljs-attr">pullPolicy:</span> <span class="hljs-string">IfNotPresent</span>

  <span class="hljs-attr">env:</span>
    <span class="hljs-attr">elastic_host:</span> <span class="hljs-string">"host.minikube.internal"</span>
    <span class="hljs-attr">elastic_port:</span> <span class="hljs-string">"9200"</span>
    <span class="hljs-attr">elastic_scheme:</span> <span class="hljs-string">"http"</span>
</code></pre>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">fluentd_forward:</span>
  <span class="hljs-attr">create:</span> <span class="hljs-literal">true</span>

  <span class="hljs-comment"># Domain-proxy output</span>
  <span class="hljs-attr">dp_output:</span> <span class="hljs-literal">true</span>

  <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span>

  <span class="hljs-attr">nodeSelector:</span> <span class="hljs-string">{}</span>
  <span class="hljs-attr">tolerations:</span> <span class="hljs-string">[]</span>
  <span class="hljs-attr">affinity:</span> <span class="hljs-string">{}</span>

  <span class="hljs-attr">image:</span>
    <span class="hljs-attr">repository:</span> <span class="hljs-string">IMAGE_REPOSITORY</span>
    <span class="hljs-attr">tag:</span> <span class="hljs-string">IMAGE_TAG</span>
    <span class="hljs-attr">pullPolicy:</span> <span class="hljs-string">IfNotPresent</span>

  <span class="hljs-attr">env:</span>
    <span class="hljs-attr">elastic_host:</span> <span class="hljs-string">"host.minikube.internal"</span>
    <span class="hljs-attr">elastic_port:</span> <span class="hljs-string">"9200"</span>
    <span class="hljs-attr">elastic_scheme:</span> <span class="hljs-string">"http"</span>
    <span class="hljs-attr">elastic_flush_interval:</span> <span class="hljs-string">5s</span>
</code></pre>
<p>Replace <code>IMAGE_REGISTRY_URL</code> with your registry and <code>IMAGE_TAG</code> with your tag.
Then install the charts</p>
<pre><code class="hljs css language-bash">helm upgrade --install --namespace orc8r --values <span class="hljs-variable">${MAGMA_ROOT}</span>/orc8r/cloud/helm/orc8r.values.yaml orc8r .
</code></pre>
<p>It may take a couple minutes before all pods are finished being created, but if successful, you should get something like this</p>
<pre><code class="hljs css language-bash">$ kubectl --namespace orc8r get pods

NAME                                             READY   STATUS    RESTARTS   AGE
mysql-57955549d5-n69pd                           1/1     Running   0          6m14s
nms-magmalte-7c84667c4c-pvtlj                    1/1     Running   0          2m58s
nms-nginx-proxy-5b86f479f7-lvjpn                 1/1     Running   0          2m58s
orc8r-alertmanager-57d5d6ccc4-ht4n4              1/1     Running   0          2m58s
orc8r-alertmanager-configurer-76cf8f8f57-rmwjf   1/1     Running   0          2m58s
orc8r-controller-fdf59f456-vvqr2                 1/1     Running   0          2m58s
orc8r-nginx-7d6c78647-n6d8z                      1/1     Running   0          2m58s
orc8r-prometheus-77dccb799b-w9z6z                1/1     Running   0          2m58s
orc8r-prometheus-cache-6d647df4d9-2wqkc          1/1     Running   0          2m58s
orc8r-prometheus-configurer-6d6d987c88-pgm87     1/1     Running   0          2m58s
orc8r-user-grafana-6498bb6959-rchx5              1/1     Running   0          2m58s
postgresql-0                                     1/1     Running   4          6d23h
</code></pre>
<p>If using fluentd, there should be the pods <code>orc8r-fluentd-forward</code> and <code>orc8r-fluentd-daemon</code> as well</p>
<pre><code class="hljs css language-bash">$ kubectl --namespace orc8r get pods

NAME                                             READY   STATUS    RESTARTS   AGE
mysql-57955549d5-n69pd                           1/1     Running   0          6m14s
nms-magmalte-7c84667c4c-pvtlj                    1/1     Running   0          2m58s
nms-nginx-proxy-5b86f479f7-lvjpn                 1/1     Running   0          2m58s
orc8r-alertmanager-57d5d6ccc4-ht4n4              1/1     Running   0          2m58s
orc8r-alertmanager-configurer-76cf8f8f57-rmwjf   1/1     Running   0          2m58s
orc8r-controller-fdf59f456-vvqr2                 1/1     Running   0          2m58s
orc8r-fluentd-forward-54794d4d86-599lv           1/1     Running   0          2m58s
orc8r-nginx-7d6c78647-n6d8z                      1/1     Running   0          2m58s
orc8r-prometheus-77dccb799b-w9z6z                1/1     Running   0          2m58s
orc8r-prometheus-cache-6d647df4d9-2wqkc          1/1     Running   0          2m58s
orc8r-prometheus-configurer-6d6d987c88-pgm87     1/1     Running   0          2m58s
orc8r-user-grafana-6498bb6959-rchx5              1/1     Running   0          2m58s
postgresql-0                                     1/1     Running   4          6d23h
</code></pre>
<pre><code class="hljs css language-bash">$ kubectl --namespace kube-system get pods

NAME                               READY   STATUS    RESTARTS   AGE
coredns-74ff55c5b-xsz59            1/1     Running   0          3d
etcd-minikube                      1/1     Running   0          3d
kube-apiserver-minikube            1/1     Running   0          3d
kube-controller-manager-minikube   1/1     Running   0          3d
kube-proxy-cp6s5                   1/1     Running   0          3d
kube-scheduler-minikube            1/1     Running   0          3d
orc8r-fluentd-daemon-b7wpt         1/1     Running   0          4h
registry-46g6n                     1/1     Running   0          3d
registry-proxy-n6kml               1/1     Running   0          3d
storage-provisioner                1/1     Running   0          3d
</code></pre>
<p>Optionally, start the elasticsearch and kibana containers which handle the logs aggregated by fluentd</p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">${MAGMA_ROOT}</span>/orc8r/cloud/docker
./run.py
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="access-logs-through-kibana"></a><a href="#access-logs-through-kibana" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Access logs through Kibana</h3>
<p>The Orchestrator logs aggregated by fluentd can be accessed via Kibana in the web browser under <code>http://localhost:5601/</code>.
There should be two index patterns: <code>fluentd</code> (from fluentd-forward) and <code>logstash</code> (from fluentd-daemon).
The <code>logstash</code> index pattern collects all logs from the Orchestrator, and <code>fluentd</code> the logs from connected gateways.</p>
<h2><a class="anchor" aria-hidden="true" id="configure"></a><a href="#configure" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configure</h2>
<h3><a class="anchor" aria-hidden="true" id="access-orc8r"></a><a href="#access-orc8r" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Access Orc8r</h3>
<p>Create an Orc8r admin user</p>
<pre><code class="hljs css language-bash">kubectl <span class="hljs-built_in">exec</span> -it --namespace orc8r deploy/orc8r-orchestrator -- \
  /var/opt/magma/bin/accessc \
  add-existing -admin -cert /var/opt/magma/certs/admin_operator.pem \
  admin_operator
</code></pre>
<p>Now ensure the API and your certs are working</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># Tab 1 (should hang)</span>
kubectl --namespace orc8r port-forward svc/orc8r-nginx-proxy 7443:8443 7444:8444 9443:443

<span class="hljs-comment"># Tab 2</span>
<span class="hljs-built_in">export</span> CERTS_DIR=<span class="hljs-variable">${MAGMA_ROOT}</span>/.cache/test_certs  <span class="hljs-comment"># mirrored from above</span>
curl \
  --insecure \
  --cert <span class="hljs-variable">${CERTS_DIR}</span>/admin_operator.pem \
  --key <span class="hljs-variable">${CERTS_DIR}</span>/admin_operator.key.pem \
  https://localhost:9443
<span class="hljs-comment"># Should output: "hello"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="access-nms"></a><a href="#access-nms" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Access NMS</h3>
<p>Follow the instructions to <a href="/magma/docs/next/orc8r/deploy_install#create-an-nms-admin-user">create an NMS admin user</a>.
Substitute the <code>host</code> organization with <code>magma-test</code> and choose some values for the user email and password, e.g. <code>admin@magma.test</code> and <code>password1234</code>.</p>
<p>Start port-forward for Nginx (this tab will hang):</p>
<pre><code class="hljs css language-bash">kubectl --namespace orc8r port-forward svc/nginx-proxy 8081:443
</code></pre>
<p>Log in to NMS at <a href="https://magma-test.localhost:8081">https://magma-test.localhost:8081</a> using credentials you chose when creating the admin user.</p>
<h2><a class="anchor" aria-hidden="true" id="appendix"></a><a href="#appendix" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Appendix</h2>
<h3><a class="anchor" aria-hidden="true" id="minikube-configs"></a><a href="#minikube-configs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Minikube configs</h3>
<p>We use the <a href="https://minikube.sigs.k8s.io/docs/drivers/hyperkit/">HyperKit driver</a> on macOS instead of the default <a href="https://minikube.sigs.k8s.io/docs/drivers/docker/">Docker driver</a> because the former is more performant in supporting <a href="https://github.com/kubernetes/minikube/issues/1568">hairpin mode</a> (via the <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/">CNI network plugin</a>). I.e., Orc8r has some services that make requests to themselves, which requires K8s support.</p>
<p>You could also accomplish this with <code>--cni=bridge --driver=docker</code>, but this causes a 2x increase in pod startup times. Note that the HyperKit driver is not supported on <a href="https://minikube.sigs.k8s.io/docs/drivers/#linux">Linux</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/magma/docs/next/orc8r/dev_testing"><span class="arrow-prev">← </span><span>Test Orchestrator</span></a><a class="docs-next button" href="/magma/docs/next/orc8r/dev_security"><span>Security</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#prerequisites">Prerequisites</a><ul class="toc-headings"><li><a href="#spin-up-minikube">Spin up Minikube</a></li><li><a href="#build-and-publish-images">Build and publish images</a></li></ul></li><li><a href="#install">Install</a><ul class="toc-headings"><li><a href="#generate-secrets">Generate secrets</a></li><li><a href="#apply-secrets">Apply secrets</a></li><li><a href="#optional-fluentd-secrets">Optional: fluentd secrets</a></li><li><a href="#create-values-file">Create values file</a></li><li><a href="#install-charts">Install charts</a></li><li><a href="#access-logs-through-kibana">Access logs through Kibana</a></li></ul></li><li><a href="#configure">Configure</a><ul class="toc-headings"><li><a href="#access-orc8r">Access Orc8r</a></li><li><a href="#access-nms">Access NMS</a></li></ul></li><li><a href="#appendix">Appendix</a><ul class="toc-headings"><li><a href="#minikube-configs">Minikube configs</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © 2025 The Magma Authors</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'f95caeb7bc059b294eec88e340e5445b',
                indexName: 'magma',
                inputSelector: '#search_input_react'
              });
            </script></body></html>